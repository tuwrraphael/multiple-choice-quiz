!function(){var e,t,n,i,o={298:function(e){e.exports='<form method="GET" action="https://accounts.google.com/o/oauth2/v2/auth" id="login_form"> <input type="hidden" name="client_id" id="client_id"> <input type="hidden" name="redirect_uri" id="redirect_uri"> <input type="hidden" name="response_type" value="token id_token"> <input type="hidden" name="login_hint" id="login_hint"> <input type="hidden" name="nonce" id="nonce"> <input type="hidden" name="scope" value="https://www.googleapis.com/auth/drive.file"> <button type="submit">Login with Google</button> </form>'}},r={};function a(e){var t=r[e];if(void 0!==t)return t.exports;var n=r[e]={exports:{}};return o[e](n,n.exports,a),n.exports}a.m=o,a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,n){return a.f[n](e,t),t}),[]))},a.u=function(e){return{115:"7b4b840cb2632e9bdabf",932:"14ab7084d4f3b9c59936"}[e]+".bundle.js"},a.miniCssF=function(e){return e+".b4f1bcf441d2ca36ab61.css"},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e={},t="multiple-choice-quiz:",a.l=function(n,i,o,r){if(e[n])e[n].push(i);else{var l,s;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==t+o){l=d;break}}l||(s=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,a.nc&&l.setAttribute("nonce",a.nc),l.setAttribute("data-webpack",t+o),l.src=n),e[n]=[i];var p=function(t,i){l.onerror=l.onload=null,clearTimeout(f);var o=e[n];if(delete e[n],l.parentNode&&l.parentNode.removeChild(l),o&&o.forEach((function(e){return e(i)})),t)return t(i)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=p.bind(null,l.onerror),l.onload=p.bind(null,l.onload),s&&document.head.appendChild(l)}},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="/multiple-choice-quiz/",n=function(e){return new Promise((function(t,n){var i=a.miniCssF(e),o=a.p+i;if(function(e,t){for(var n=document.getElementsByTagName("link"),i=0;i<n.length;i++){var o=(a=n[i]).getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(o===e||o===t))return a}var r=document.getElementsByTagName("style");for(i=0;i<r.length;i++){var a;if((o=(a=r[i]).getAttribute("data-href"))===e||o===t)return a}}(i,o))return t();!function(e,t,n,i){var o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.onerror=o.onload=function(r){if(o.onerror=o.onload=null,"load"===r.type)n();else{var a=r&&("load"===r.type?"missing":r.type),l=r&&r.target&&r.target.href||t,s=new Error("Loading CSS chunk "+e+" failed.\n("+l+")");s.code="CSS_CHUNK_LOAD_FAILED",s.type=a,s.request=l,o.parentNode.removeChild(o),i(s)}},o.href=t,document.head.appendChild(o)}(e,o,t,n)}))},i={826:0},a.f.miniCss=function(e,t){i[e]?t.push(i[e]):0!==i[e]&&{115:1}[e]&&t.push(i[e]=n(e).then((function(){i[e]=0}),(function(t){throw delete i[e],t})))},function(){a.b=document.baseURI||self.location.href;var e={826:0};a.f.j=function(t,n){var i=a.o(e,t)?e[t]:void 0;if(0!==i)if(i)n.push(i[2]);else{var o=new Promise((function(n,o){i=e[t]=[n,o]}));n.push(i[2]=o);var r=a.p+a.u(t),l=new Error;a.l(r,(function(n){if(a.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.src;l.message="Loading chunk "+t+" failed.\n("+o+": "+r+")",l.name="ChunkLoadError",l.type=o,l.request=r,i[1](l)}}),"chunk-"+t,t)}};var t=function(t,n){var i,o,r=n[0],l=n[1],s=n[2],c=0;for(i in l)a.o(l,i)&&(a.m[i]=l[i]);for(s&&s(a),t&&t(n);c<r.length;c++)o=r[c],a.o(e,o)&&e[o]&&e[o][0](),e[r[c]]=0},n=self.webpackChunkmultiple_choice_quiz=self.webpackChunkmultiple_choice_quiz||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}(),function(){"use strict";let e;e="prod";var t=a(298),n=a.n(t);class i extends HTMLElement{constructor(){super(),this.innerHTML=n()}connectedCallback(){this.clientIdInput=this.querySelector("#client_id"),this.nonceIput=this.querySelector("#nonce"),this.clientIdInput.value="766159746790-suj231pdh7ec2kb4iq92fh6l7ekkfh7t.apps.googleusercontent.com",this.redirectUriInput=this.querySelector("#redirect_uri"),this.redirectUriInput.value=window.location.href.replace(/(\?.+)|(\#.+)/g,"").replace(/(\/$)/g,""),this.loginHintInput=this.querySelector("#login_hint"),this.loginForm=this.querySelector("#login_form"),this.nonceIput.value=function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<8;i++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}(),"FederatedCredential"in window&&navigator.credentials.get({federated:{providers:["https://accounts.google.com"]},mediation:"optional"}).then((e=>{e&&"federated"==e.type&&(this.loginHintInput.value=e.id,this.loginForm.submit())}))}disconnectedCallback(){}}customElements.define("app-login",i);let o=null;function r(){document.querySelector("#updateready").style.display=""}if(document.querySelector("#update-btn").addEventListener("click",(()=>{o.postMessage({action:"skipWaiting"})})),"serviceWorker"in navigator){window.addEventListener("load",(async()=>{try{let e=await navigator.serviceWorker.register("./sw.js");if(!navigator.serviceWorker.controller)return;let t=e=>{e.addEventListener("statechange",(()=>{"installed"==e.state&&(o=e,r())}))};if(e.waiting)return o=e.waiting,void r();if(e.installing)return void t(e.installing);e.addEventListener("updatefound",(()=>t(e.installing)))}catch(e){console.log("SW registration failed.",e)}}));let e=!1;navigator.serviceWorker.addEventListener("controllerchange",(()=>{e||(e=!0,window.location.reload())}))}(async function(){var e=null,t=parseInt(sessionStorage.getItem("exp"));!isNaN(t)&&t>+new Date&&(e=sessionStorage.getItem("token"));var n=window.location,o=new URLSearchParams(n.hash.replace(/^#/,"")),r=o.get("access_token");if(r){var l=parseInt(o.get("expires_in"));if(sessionStorage.setItem("token",r),t=+new Date+1e3*l,sessionStorage.setItem("exp",""+t),history.replaceState(null,null," "),e=r,console.log(e),"FederatedCredential"in window){let e=await fetch(`https://oauth2.googleapis.com/tokeninfo?access_token=${r}`);if(!e.ok)throw new Error(`access token validation resulted in ${e.status}`);let t=await e.json();var s=await navigator.credentials.create({federated:{id:t.sub,provider:"https://accounts.google.com"}});await navigator.credentials.store(s)}}if(e){document.querySelector("#logout").addEventListener("click",(async()=>{await navigator.credentials.preventSilentAccess(),sessionStorage.clear(),window.location.reload()})),setTimeout((function(){window.location.reload()}),t-+new Date);let n=document.querySelector("#initializing");n.style.display="flex";const i={headers:{Authorization:`Bearer ${e}`}};let o=await fetch("https://www.googleapis.com/drive/v3/files",{...i}),r=await o.json(),l=null,s=r.files.find((e=>"application/vnd.google-apps.spreadsheet"==e.mimeType&&"MultipleChoiceQuiz"==e.name));if(s)l=s.id;else{let e=await fetch("https://sheets.googleapis.com/v4/spreadsheets",{...i,headers:{...i.headers,"Content-Type":"application/json"},method:"POST",body:JSON.stringify({properties:{title:"MultipleChoiceQuiz"},sheets:[{properties:{title:"base"}}]})}),t=await e.json();l=t.spreadsheetId}let c=document.querySelector("#quizzes");n.style.display="none",c.style.display="flex";for(let t of document.querySelectorAll(".openquiz"))t.addEventListener("click",(async n=>{n.preventDefault();const{Quiz:i}=await a.e(115).then(a.bind(a,115));let o=new i;document.body.appendChild(o),c.style.display="none";let r=document.querySelector("#number-of-questions"),s=document.querySelector("#repeat-questions");await o.initialize(e,l,t.getAttribute("data-file"),{numberOfQuestions:parseInt(r.value||"50"),repeat:parseInt(s.value||"1")-1})}))}else{let e=new i;document.body.appendChild(e)}})().catch((e=>console.error(e)))}()}();
//# sourceMappingURL=214b7305293e81284bdc.bundle.js.map