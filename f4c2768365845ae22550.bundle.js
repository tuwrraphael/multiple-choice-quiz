!function(){"use strict";var e,t,n={},i={};function o(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={exports:{}};return n[e](r,r.exports,o),r.exports}let r;o.m=n,o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.f={},o.e=function(e){return Promise.all(Object.keys(o.f).reduce((function(t,n){return o.f[n](e,t),t}),[]))},o.u=function(e){return{798:"41e4f635fe9e037da47b",814:"e28f26259cb6631aa9a1"}[e]+".bundle.js"},o.miniCssF=function(e){return e+".89eb824b6c1c1b2032ee.css"},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e={},t="multiple-choice-quiz:",o.l=function(n,i,r,a){if(e[n])e[n].push(i);else{var l,s;if(void 0!==r)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==t+r){l=d;break}}l||(s=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,o.nc&&l.setAttribute("nonce",o.nc),l.setAttribute("data-webpack",t+r),l.src=n),e[n]=[i];var p=function(t,i){l.onerror=l.onload=null,clearTimeout(f);var o=e[n];if(delete e[n],l.parentNode&&l.parentNode.removeChild(l),o&&o.forEach((function(e){return e(i)})),t)return t(i)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=p.bind(null,l.onerror),l.onload=p.bind(null,l.onload),s&&document.head.appendChild(l)}},o.p="/multiple-choice-quiz/",function(){if("undefined"!=typeof document){var e={826:0};o.f.miniCss=function(t,n){e[t]?n.push(e[t]):0!==e[t]&&{798:1}[t]&&n.push(e[t]=function(e){return new Promise((function(t,n){var i=o.miniCssF(e),r=o.p+i;if(function(e,t){for(var n=document.getElementsByTagName("link"),i=0;i<n.length;i++){var o=(a=n[i]).getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(o===e||o===t))return a}var r=document.getElementsByTagName("style");for(i=0;i<r.length;i++){var a;if((o=(a=r[i]).getAttribute("data-href"))===e||o===t)return a}}(i,r))return t();!function(e,t,n,i,o){var r=document.createElement("link");r.rel="stylesheet",r.type="text/css",r.onerror=r.onload=function(n){if(r.onerror=r.onload=null,"load"===n.type)i();else{var a=n&&("load"===n.type?"missing":n.type),l=n&&n.target&&n.target.href||t,s=new Error("Loading CSS chunk "+e+" failed.\n("+l+")");s.code="CSS_CHUNK_LOAD_FAILED",s.type=a,s.request=l,r.parentNode&&r.parentNode.removeChild(r),o(s)}},r.href=t,document.head.appendChild(r)}(e,r,0,t,n)}))}(t).then((function(){e[t]=0}),(function(n){throw delete e[t],n})))}}}(),function(){o.b=document.baseURI||self.location.href;var e={826:0};o.f.j=function(t,n){var i=o.o(e,t)?e[t]:void 0;if(0!==i)if(i)n.push(i[2]);else{var r=new Promise((function(n,o){i=e[t]=[n,o]}));n.push(i[2]=r);var a=o.p+o.u(t),l=new Error;o.l(a,(function(n){if(o.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var r=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;l.message="Loading chunk "+t+" failed.\n("+r+": "+a+")",l.name="ChunkLoadError",l.type=r,l.request=a,i[1](l)}}),"chunk-"+t,t)}};var t=function(t,n){var i,r,a=n[0],l=n[1],s=n[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(i in l)o.o(l,i)&&(o.m[i]=l[i]);s&&s(o)}for(t&&t(n);c<a.length;c++)r=a[c],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0},n=self.webpackChunkmultiple_choice_quiz=self.webpackChunkmultiple_choice_quiz||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}(),r="prod";class a extends HTMLElement{clientIdInput;redirectUriInput;loginHintInput;loginForm;nonceIput;constructor(){super(),this.innerHTML='<form method="GET" action="https://accounts.google.com/o/oauth2/v2/auth" id="login_form"> <input type="hidden" name="client_id" id="client_id"> <input type="hidden" name="redirect_uri" id="redirect_uri"> <input type="hidden" name="response_type" value="token id_token"> <input type="hidden" name="login_hint" id="login_hint"> <input type="hidden" name="nonce" id="nonce"> <input type="hidden" name="scope" value="https://www.googleapis.com/auth/drive.file"> <button type="submit">Login with Google</button> </form>'}connectedCallback(){this.clientIdInput=this.querySelector("#client_id"),this.nonceIput=this.querySelector("#nonce"),this.clientIdInput.value="766159746790-suj231pdh7ec2kb4iq92fh6l7ekkfh7t.apps.googleusercontent.com",this.redirectUriInput=this.querySelector("#redirect_uri"),this.redirectUriInput.value=window.location.href.replace(/(\?.+)|(\#.+)/g,"").replace(/(\/$)/g,""),this.loginHintInput=this.querySelector("#login_hint"),this.loginForm=this.querySelector("#login_form"),this.nonceIput.value=function(e){for(var t="",n=0;n<8;n++)t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return t}(),"FederatedCredential"in window&&navigator.credentials.get({federated:{providers:["https://accounts.google.com"]},mediation:"optional"}).then((e=>{e&&"federated"==e.type&&(this.loginHintInput.value=e.id,this.loginForm.submit())}))}disconnectedCallback(){}}customElements.define("app-login",a);let l=null;function s(){document.querySelector("#updateready").style.display=""}if(document.querySelector("#update-btn").addEventListener("click",(()=>{l.postMessage({action:"skipWaiting"})})),"serviceWorker"in navigator){window.addEventListener("load",(async()=>{try{let e=await navigator.serviceWorker.register("./sw.js");if(!navigator.serviceWorker.controller)return;let t=e=>{e.addEventListener("statechange",(()=>{"installed"==e.state&&(l=e,s())}))};if(e.waiting)return l=e.waiting,void s();if(e.installing)return void t(e.installing);e.addEventListener("updatefound",(()=>t(e.installing)))}catch(e){console.log("SW registration failed.",e)}}));let e=!1;navigator.serviceWorker.addEventListener("controllerchange",(()=>{e||(e=!0,window.location.reload())}))}(async function(){var e=null,t=parseInt(sessionStorage.getItem("exp"));!isNaN(t)&&t>+new Date&&(e=sessionStorage.getItem("token"));var n=window.location,i=new URLSearchParams(n.hash.replace(/^#/,"")),r=i.get("access_token");if(r){var l=parseInt(i.get("expires_in"));if(sessionStorage.setItem("token",r),t=+new Date+1e3*l,sessionStorage.setItem("exp",""+t),history.replaceState(null,null," "),e=r,console.log(e),"FederatedCredential"in window){let e=await fetch(`https://oauth2.googleapis.com/tokeninfo?access_token=${r}`);if(!e.ok)throw new Error(`access token validation resulted in ${e.status}`);let t=await e.json();var s=await navigator.credentials.create({federated:{id:t.sub,provider:"https://accounts.google.com"}});await navigator.credentials.store(s)}}if(e){document.querySelector("#logout").addEventListener("click",(async()=>{await navigator.credentials.preventSilentAccess(),sessionStorage.clear(),window.location.reload()})),setTimeout((function(){window.location.reload()}),t-+new Date);let n=document.querySelector("#initializing");n.style.display="flex";const i={headers:{Authorization:`Bearer ${e}`}};let r=await fetch("https://www.googleapis.com/drive/v3/files",{...i}),a=await r.json(),l=null,s=a.files.find((e=>"application/vnd.google-apps.spreadsheet"==e.mimeType&&"MultipleChoiceQuiz"==e.name));if(s)l=s.id;else{let e=await fetch("https://sheets.googleapis.com/v4/spreadsheets",{...i,headers:{...i.headers,"Content-Type":"application/json"},method:"POST",body:JSON.stringify({properties:{title:"MultipleChoiceQuiz"},sheets:[{properties:{title:"base"}}]})}),t=await e.json();l=t.spreadsheetId}let c=document.querySelector("#quizzes");n.style.display="none",c.style.display="flex";for(let t of document.querySelectorAll(".openquiz"))t.addEventListener("click",(async n=>{n.preventDefault();const{Quiz:i}=await o.e(798).then(o.bind(o,798));let r=new i;document.body.appendChild(r),c.style.display="none";let a=document.querySelector("#number-of-questions"),s=document.querySelector("#repeat-questions");await r.initialize(e,l,t.getAttribute("data-file"),{numberOfQuestions:parseInt(a.value||"50"),repeat:parseInt(s.value||"1")-1})}))}else{let e=new a;document.body.appendChild(e)}})().catch((e=>console.error(e)))}();
//# sourceMappingURL=f4c2768365845ae22550.bundle.js.map