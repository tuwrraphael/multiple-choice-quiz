(self.webpackChunkmultiple_choice_quiz=self.webpackChunkmultiple_choice_quiz||[]).push([[493],{172:function(e){e.exports='<input type="checkbox" class="answer-checkbox__input"> <label class="answer-checkbox__label"></label> <span class="answer-reveal"></span>'},851:function(e){e.exports='<progress id="loading"></progress> <div id="decryptFailed" style="display:none"> Decryption failed! </div> <div id="saveError" style="display:none"> Error saving the results! </div> <div class="key" id="need-key" style="display:none"> <h1>This quiz is encrypted</h1> <p>Please enter the decryption key.</p> <label for="key">Decryption key</label> <input id="key"> <button id="decrypt">OK</button> </div> <div id="saving" style="visibility:hidden"> Your results are being saved, do not close the app. </div> <div class="question"> <h1 id="question"></h1> </div> <form class="answers"> </form> <div class="controls"> <button id="save" title="save the answers">save answers</button> <button id="next" title="see the next question">see next question</button> <span id="done" style="display:none">Congratulations you are done!</span> </div>'},493:function(e,t,s){"use strict";s.r(t),s.d(t,{Quiz:function(){return d}});class i{constructor(e,t,s){this.listElement=e,this.keySelector=t,this.createElement=s,this.keyToElement=new Map,this.elementToKey=new WeakMap}update(e,t){let s=new Map,i=e=>s.get(e)||(()=>{let t=this.keySelector(e);return s.set(e,t),t})();for(let s of Array.from(this.listElement.children)){let n=s,r=e.find((e=>this.elementToKey.get(n)==i(e)));r?t(n,r):this.listElement.removeChild(n)}let n=null,r=new Map;for(let s of e){let e=i(s),l=this.keyToElement.get(e);l||(l=this.createElement(s),t(l,s),this.elementToKey.set(l,e)),r.set(e,l),null==n&&l!=this.listElement.firstElementChild?this.listElement.prepend(l):null!=n&&n.nextElementSibling!=l&&n.insertAdjacentElement("afterend",l),n=l}this.keyToElement=r}}var n=s(172),r=s.n(n);class l extends HTMLElement{constructor(){super(),this.innerHTML=r(),this.input=this.querySelector("input"),this.label=this.querySelector("label"),this.reveal=this.querySelector(".answer-reveal")}reset(){this.input.checked=!1}connectedCallback(){}disconnectedCallback(){}setData(e,t,s){this.label.setAttribute("for",this.input.id=`answer-${e}`),this.label.innerText=t.text,this.input.name=""+e,this.input.disabled=s,s?this.classList.add("reveal"):this.classList.remove("reveal"),["correct","wrong"].forEach((e=>{this.label.classList.remove(e),this.reveal.classList.remove(e)})),t.correct?(this.reveal.title="this is a correct answer",this.reveal.classList.add("correct"),this.label.classList.add("correct")):(this.reveal.title="this is a wrong answer",this.reveal.classList.add("wrong"),this.label.classList.add("wrong"))}}customElements.define("answer-checkbox",l);var a=s(851),o=s.n(a);class d extends HTMLElement{constructor(){super(),this.innerHTML=o(),this.loading=this.querySelector("#loading"),this.form=this.querySelector("form"),this.answerRenderer=new i(this.form,(e=>e[0]),(()=>new l)),this.encryptionKeyForm=this.querySelector("#need-key"),this.keyInput=this.querySelector("#key"),this.decryptBtn=this.querySelector("#decrypt"),this.decryptFailed=this.querySelector("#decryptFailed"),this.nextBtn=this.querySelector("#next"),this.saveBtn=this.querySelector("#save"),this.doneText=this.querySelector("#done"),this.saveError=this.querySelector("#saveError"),this.saving=this.querySelector("#saving"),this.decryptBtn.addEventListener("click",(e=>{this.worker.postMessage({type:"load",access_token:this.access_token,spreadsheetId:this.spreadsheetId,quizfile:this.quizfile,decryptionKey:this.keyInput.value})})),this.nextBtn.addEventListener("click",(()=>{this.worker.postMessage({type:"next"})})),this.saveBtn.addEventListener("click",(()=>{let e=new FormData(this.form);this.worker.postMessage({type:"save",userAnswers:this.question.answers.map(((t,s)=>"on"==e.get(""+s)))})}))}connectedCallback(){this.questionText=this.querySelector("#question")}disconnectedCallback(){}async initialize(e,t,i){this.access_token=e,this.spreadsheetId=t,this.quizfile=i,this.worker=new Worker(new URL(s.p+s.u(932),s.b)),this.worker.addEventListener("message",(e=>{let t=e.data;t.question&&(this.questionText.innerText=t.question.text,this.answerRenderer.update(t.question.answers.map(((e,t)=>[t,e])),((e,s)=>{e.setData(s[0],s[1],t.reveal),this.question&&this.question.id==t.question.id||e.reset()})),this.question=t.question),this.loading.style.display=t.loading?"block":"none",this.encryptionKeyForm.style.display=t.needKey?"block":"none",this.decryptFailed.style.display=t.decryptFailed?"block":"none",this.nextBtn.style.display=t.question&&t.reveal&&!t.done?"inline":"none",this.saveBtn.style.display=t.question&&!t.reveal?"inline":"none",this.doneText.style.display=t.reveal&&t.done?"inline":"none",this.saving.style.visibility=t.unsaved?"visible":"hidden",this.saveError.style.display=t.saveerror?"block":"none"})),this.worker.postMessage({type:"load",access_token:e,spreadsheetId:t,quizfile:i})}}customElements.define("app-quiz",d)}}]);
//# sourceMappingURL=90355df9b0369b6f6f7c.bundle.js.map